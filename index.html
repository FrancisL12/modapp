<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treinamento de Moderadores Lord Aroma</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Ajustes para listas dentro de prose */
        .prose ul li {
            margin-bottom: 0.5rem;
        }
        .prose ul.list-disc li {
            list-style-type: disc;
            margin-left: 1.25rem; /* Adjust indent for disc lists */
        }
        .prose ul.list-circle li {
            list-style-type: circle;
            margin-left: 1.25rem; /* Adjust indent for circle lists */
        }
        .prose ul.list-square li {
            list-style-type: square;
            margin-left: 1.25rem; /* Adjust indent for square lists */
        }
        /* Animation for modals */
        .animate-scale-in {
            animation: scaleIn 0.3s ease-out forwards;
        }
        @keyframes scaleIn {
            from {
                transform: scale(0.95);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }
        /* Custom scrollbar for modal */
        .max-h-[90vh]::-webkit-scrollbar {
            width: 8px;
        }
        .max-h-[90vh]::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .max-h-[90vh]::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        .max-h-[90vh]::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-50 to-purple-100 p-6 font-sans antialiased text-gray-800">
    <div id="app-root" class="container mx-auto max-w-3xl">
        <!-- Content will be injected here by JavaScript -->
    </div>

    <script>
        // Global state variables
        let currentStep = 0;
        let quizCompletedStatus = {}; // { 'moduleId': true/false }
        let currentQuizScore = null; // To store quiz score in the modal

        // --- Application Data (Steps, Quizzes) ---
        const steps = [
            {
                id: 'intro',
                title: 'Bem-vindo ao Treinamento de Moderadores Lord Aroma!',
                content: `
                    <p>Ol√°, futuro moderador do Lord Aroma!</p>
                    <p>Seu papel √© crucial para o sucesso das nossas lives. Voc√™ ser√° a orquestra secund√°ria, garantindo que a melodia do funil de vendas seja constante, enquanto o Lord Aroma √© o maestro principal.</p>
                    <p>Este treinamento interativo foi desenvolvido para que voc√™ compreenda completamente suas fun√ß√µes e se sinta preparado para atuar com confian√ßa e efici√™ncia. Vamos aprender e praticar juntos!</p>
                    <p class="mt-4 text-center text-lg font-bold text-purple-700">Prepare-se para se tornar um mestre na modera√ß√£o!</p>
                `,
            },
            {
                id: 'estrutura-live',
                title: 'A Estrutura da Live: Micro-Blocos e Funil',
                content: `
                    <p>Nossas lives de 2 horas s√£o divididas em 4 ciclos de 30 minutos, cada um com uma mini-jornada e uma Chamada para A√ß√£o (CTA) espec√≠fica.</p>
                    <h3 class="text-2xl font-semibold text-gray-900 mt-6 mb-3">Ciclo 1 e 3: Foco em Decants (Minutos 0-30 e 60-90)</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li>**Conte√∫do (25 minutos):** Apresenta√ß√£o de 3-5 perfumes, storytelling sobre notas, sensa√ß√µes e "status". Intera√ß√£o sobre esses perfumes.</li>
                        <li>**Chamada para A√ß√£o (5 minutos):** Lord Aroma incentiva a compra de decants para experimentar os perfumes.</li>
                        <li>**Seu Papel como Moderador:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Fixar coment√°rio: "Link dos Decants na Bio! Clique e experimente seus perfumes preferidos!"</li>
                            <li>Responder d√∫vidas sobre como encontrar o link ou comprar decants.</li>
                            <li>Refor√ßar a CTA: "N√£o perca tempo, os decants s√£o limitados! Link na Bio!"</li>
                        </ul>
                        </li>
                    </ul>
                    <h3 class="text-2xl font-semibold text-gray-900 mt-6 mb-3">Ciclo 2 e 4: Foco no Grupo de Lacrados (Minutos 30-60 e 90-120)</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li>**Conte√∫do (25 minutos):** Apresenta√ß√£o de 3-5 perfumes "oportunidades" (raros, com desconto) para compra de frascos lacrados. Foco na economia a longo prazo e experi√™ncia completa.</li>
                        <li>**Chamada para A√ß√£o (5 minutos):** Lord Aroma convida para o Grupo VIP do WhatsApp para ofertas exclusivas de lacrados.</li>
                        <li>**Seu Papel como Moderador:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Fixar coment√°rio: "Quer ofertas exclusivas de Lacrados? Entre no Grupo VIP do WhatsApp! Link na Bio!"</li>
                            <li>Responder d√∫vidas sobre o grupo e o que ele oferece.</li>
                            <li>Refor√ßar a CTA: "N√£o fique de fora das promo√ß√µes! Grupo VIP no WhatsApp, link na Bio!"</li>
                        </ul>
                        </li>
                    </ul>
                    <p class="mt-6">Compreender essa estrutura √© o primeiro passo para uma modera√ß√£o eficaz!</p>
                `,
            },
            {
                id: 'modulo-gestao-comentarios',
                title: 'M√≥dulo 1: Gest√£o de Coment√°rios e Perguntas (Tempo Real)',
                content: `
                    <p>Como moderador, voc√™ √© o "curador do chat", garantindo que as informa√ß√µes fluam e que o ambiente seja prop√≠cio para a venda e o engajamento.</p>
                    <ul class="list-disc list-inside space-y-3 ml-4">
                        <li>**Filtro de Relev√¢ncia e Prioriza√ß√£o:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Identifique e priorize perguntas pertinentes sobre os perfumes e produtos (decants/lacrados).</li>
                            <li>Perguntas diretas sobre o perfume sendo apresentado (ex: "Qual a proje√ß√£o?", "√â bom para o dia a dia?") devem ser repassadas para o Lord com destaque.</li>
                            <li>Exemplo de a√ß√£o: Copie a pergunta relevante e cole em um canal de comunica√ß√£o interno (WhatsApp, Discord) para o Lord, ou marque o Lord nos coment√°rios para chamar a aten√ß√£o.</li>
                        </ul>
                        </li>
                        <li>**Respostas R√°pidas e Padronizadas:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Crie um "manual de respostas r√°pidas" (dispon√≠vel no final deste treinamento).</li>
                            <li>Exemplos: "O link para comprar/entrar est√° na Bio do perfil do Lord Aroma, pessoal!", "Sim, todos os perfumes do Lord Aroma s√£o 100% originais!", "Entregamos para todo o Brasil!".</li>
                            <li>Impacto: Reduz a barreira da d√∫vida para a compra, agiliza o processo e libera o Lord para focar no conte√∫do.</li>
                        </ul>
                        </li>
                        <li>**Limpeza e Seguran√ßa do Ambiente:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Remova coment√°rios inadequados, spam ou ofensivos.</li>
                            <li>Bloqueie usu√°rios recorrentes que insistem em desviar o assunto ou criar atritos.</li>
                            <li>Proteja o Lord, evitando que coment√°rios negativos ou desnecess√°rios tirem o foco ou o tempo dele.</li>
                        </ul>
                        </li>
                        <li>**Engajamento Ativo e Incentivo:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Provoque a intera√ß√£o com perguntas abertas (ex: "Qual perfume voc√™s usam hoje?", "Qual a fragr√¢ncia dos seus sonhos?").</li>
                            <li>Pe√ßa likes e compartilhamentos: "Deixem o like na live pra mais dicas como essa!", "Compartilhem com um amigo que ama perfume!".</li>
                            <li>Reconhe√ßa e mencione nomes de quem fez perguntas legais ou interagiu bastante, criando senso de comunidade.</li>
                            <li>Impacto: Mais engajamento = mais tempo de visualiza√ß√£o = maior probabilidade de exposi√ß√£o √† CTA e, consequentemente, mais convers√µes.</li>
                        </ul>
                        </li>
                    </ul>
                `,
                quiz: {
                    questions: [
                        {
                            question: "Qual o principal objetivo do moderador ao responder a perguntas r√°pidas no chat?",
                            options: [
                                "Mostrar que o moderador sabe todas as respostas.",
                                "Reduzir a barreira da d√∫vida para a compra e liberar o Lord para focar no conte√∫do.",
                                "Apenas manter o chat movimentado.",
                                "Ignorar as perguntas para n√£o atrapalhar o Lord."
                            ],
                            correctAnswer: 1,
                        },
                        {
                            question: "Quando um usu√°rio faz uma pergunta muito espec√≠fica sobre um perfume que o Lord n√£o est√° abordando no momento, qual a melhor a√ß√£o do moderador?",
                            options: [
                                "Responder a pergunta diretamente, mesmo que n√£o saiba a resposta exata.",
                                "Ignorar a pergunta.",
                                "Direcionar a pergunta para o Lord em um canal interno ou chamando a aten√ß√£o no chat.",
                                "Bloquear o usu√°rio por fazer perguntas irrelevantes."
                            ],
                            correctAnswer: 2,
                        },
                    ],
                },
            },
            {
                id: 'modulo-reforco-cta',
                title: 'M√≥dulo 2: Refor√ßo da Chamada para A√ß√£o (CTA)',
                content: `
                    <p>Voc√™ √© o "garoto-propaganda do chat", garantindo que a mensagem de venda e comunidade esteja sempre vis√≠vel e refor√ßada.</p>
                    <ul class="list-disc list-inside space-y-3 ml-4">
                        <li>**Fixar Coment√°rios Din√¢micos e Persuasivos:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Altere o coment√°rio fixado conforme o ciclo da live (decants/lacrados).</li>
                            <li>Exemplos para Decants:
                            <ul class="list-square list-inside ml-4">
                                <li>"üî• DECIS√ÉO INTELIGENTE: EXPERIMENTE ANTES DE COMPRAR! Decants dos melhores perfumes na Bio! Clique J√Å! üî•"</li>
                                <li>"üëÉ DESCUBRA SEU CHEIRO ASSINATURA! Decants exclusivos do Lord Aroma ‚Äì Link na Bio! üöÄ"</li>
                            </ul>
                            </li>
                            <li>Exemplos para Grupo de Lacrados:
                            <ul class="list-square list-inside ml-4">
                                <li>"üí∏ ECONOMIZE DE VERDADE COM PERFUMES LACRADOS! Entre no Grupo VIP do WhatsApp ‚Äì Link na Bio! Vagas limitadas! üö®"</li>
                                <li>"üëë FA√áA PARTE DA ELITE DA PERFUMARIA! Acesso a ofertas exclusivas no Grupo VIP Lord Aroma ‚Äì Link na Bio! ‚ú®"</li>
                            </ul>
                            </li>
                            <li>Impacto: Mant√©m a oferta principal daquele bloco de 30 minutos em evid√™ncia constante.</li>
                        </ul>
                        </li>
                        <li>**Respostas com CTA Estrat√©gica:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Transforme elogios e dores em oportunidades de venda.</li>
                            <li>Coment√°rio: "Que perfume maravilhoso esse!"</li>
                            <li>Sua Resposta: "√â incr√≠vel mesmo! Quer sentir ele na sua pele? O decant est√° dispon√≠vel no link da Bio! Corre l√°!"</li>
                            <li>Coment√°rio: "Quero comprar esse perfume, mas est√° caro!"</li>
                            <li>Sua Resposta: "Entendo! No nosso Grupo VIP do WhatsApp, conseguimos pre√ßos exclusivos para lacrados! O link pra entrar est√° na Bio, n√£o perca!"</li>
                        </ul>
                        </li>
                        <li>**Cria√ß√£o de Senso de Urg√™ncia e Escassez (Real ou Estrat√©gico):**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>"Pessoal, acabamos de vender mais 3 decants do [Nome do Perfume]! Corram antes que acabe!"</li>
                            <li>"Aten√ß√£o! Mais 5 vagas preenchidas no Grupo VIP! Logo n√£o teremos mais espa√ßo!"</li>
                            <li>"√öltima chance de garantir essa oferta exclusiva de decants dessa leva!"</li>
                            <li>Impacto: Gatilha a tomada de decis√£o r√°pida, evitando que o espectador adie a compra ou a entrada no grupo.</li>
                        </ul>
                        </li>
                    </ul>
                `,
                quiz: {
                    questions: [
                        {
                            question: "Um usu√°rio comenta: 'Que perfume incr√≠vel!'. Como o moderador pode usar a CTA?",
                            options: [
                                "Apenas responder: 'Sim, √© maravilhoso!'",
                                "Direcionar para o decant do perfume: 'Quer sentir ele na sua pele? O decant est√° dispon√≠vel no link da Bio! Corre l√°!'",
                                "Ignorar o coment√°rio, pois n√£o √© uma pergunta.",
                                "Pedir para o usu√°rio chamar no direct."
                            ],
                            correctAnswer: 1,
                        },
                        {
                            question: "Durante um ciclo focado em decants, qual coment√°rio o moderador deve fixar?",
                            options: [
                                "Ofertas exclusivas de Lacrados! Entre no Grupo VIP!",
                                "Link dos Decants na Bio! Clique e experimente seus perfumes preferidos!",
                                "Bem-vindos √† live do Lord Aroma!",
                                "Perfume X √© o melhor!"
                            ],
                            correctAnswer: 1,
                        },
                    ],
                },
            },
            {
                id: 'modulo-prova-social',
                title: 'M√≥dulo 3: Gatilhos de Prova Social e Autoridade',
                content: `
                    <p>Voc√™ ajuda a construir confian√ßa e credibilidade para o Lord Aroma, usando o que os outros dizem de bom.</p>
                    <ul class="list-disc list-inside space-y-3 ml-4">
                        <li>**Destacar Depoimentos:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Se algu√©m no chat comentar que comprou um decant e amou, o moderador pode:
                            <ul class="list-square list-inside ml-4">
                                <li>Fixar esse coment√°rio por um tempo.</li>
                                <li>Chamar a aten√ß√£o do Lord para ele (ex: "Lord, olha o coment√°rio do Jo√£o, ele amou o decant do Aventus que comprou com voc√™!").</li>
                            </ul>
                            </li>
                            <li>Impacto: Mostra que outras pessoas j√° compraram e est√£o satisfeitas, gerando confian√ßa em novos compradores.</li>
                        </ul>
                        </li>
                        <li>**Refor√ßar a Autoridade do Lord Aroma:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Em momentos oportunos, ou quando houver d√∫vidas sobre a curadoria, o moderador pode refor√ßar:
                            <ul class="list-square list-inside ml-4">
                                <li>"Lembrem-se, pessoal, a curadoria do Lord Aroma √© impec√°vel! Ele realmente entende de perfumes e s√≥ indica o melhor!"</li>
                                <li>"Todos os produtos s√£o 100% originais e selecionados pelo Lord Aroma, podem confiar!"</li>
                            </ul>
                            </li>
                            <li>Impacto: Solidifica a imagem do Lord como especialista, aumentando a confian√ßa nas recomenda√ß√µes e produtos.</li>
                        </ul>
                        </li>
                        <li>**Interagir com F√£s e Clientes Fi√©is:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Quando clientes conhecidos ou f√£s entusiastas aparecem no chat:
                            <ul class="list-square list-inside ml-4">
                                <li>Mencione-os e agrade√ßa o apoio (ex: "Que bom te ver aqui, [Nome do F√£]!").</li>
                                <li>Isso cria um senso de comunidade e incentiva outros a se tornarem parte desse grupo.</li>
                            </ul>
                            </li>
                            <li>Impacto: Fortalece a comunidade e cria um ambiente positivo, que naturalmente atrai mais pessoas.</li>
                        </ul>
                        </li>
                    </ul>
                `,
                quiz: {
                    questions: [
                        {
                            question: "Um usu√°rio no chat escreve: 'Recebi meu decant e adorei!'. Qual a melhor a√ß√£o do moderador para usar a prova social?",
                            options: [
                                "Agradecer e seguir em frente.",
                                "Fixar o coment√°rio no topo do chat e, se poss√≠vel, chamar a aten√ß√£o do Lord para ele.",
                                "Responder com um emoji de cora√ß√£o.",
                                "Pedir para o usu√°rio gravar um v√≠deo de depoimento."
                            ],
                            correctAnswer: 1,
                        },
                        {
                            question: "Por que √© importante para o moderador refor√ßar a autoridade do Lord Aroma?",
                            options: [
                                "Para que o Lord se sinta valorizado.",
                                "Para aumentar a confian√ßa dos espectadores nas recomenda√ß√µes e produtos, e impulsionar vendas.",
                                "Para preencher o chat com informa√ß√µes.",
                                "N√£o √© uma fun√ß√£o importante do moderador."
                            ],
                            correctAnswer: 1,
                        },
                    ],
                },
            },
            {
                id: 'modulo-suporte-basico',
                title: 'M√≥dulo 4: Suporte ao Cliente B√°sico (Durante a Live)',
                content: `
                    <p>Voc√™ atua como a primeira linha de suporte, resolvendo d√∫vidas simples e direcionando as mais complexas.</p>
                    <ul class="list-disc list-inside space-y-3 ml-4">
                        <li>**Orienta√ß√µes Gerais:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Se algu√©m perguntar "Como compro?", "Como fa√ßo para entrar no grupo?", etc., o moderador deve dar um mini passo a passo claro:
                            <ul class="list-square list-inside ml-4">
                                <li>"V√° no meu perfil, clique no link da Bio e l√° voc√™ ver√° as op√ß√µes de decants e o link para o grupo."</li>
                                <li>"Aceitamos cart√£o, pix, boleto! Todas as op√ß√µes no link da Bio."</li>
                                <li>"Entregamos para todo o Brasil! Verifique o frete no site/link da Bio."</li>
                            </ul>
                            </li>
                            <li>Impacto: Remove barreiras de compra e melhora a experi√™ncia do usu√°rio.</li>
                        </ul>
                        </li>
                        <li>**Direcionamento para Direct (DM) ou Contato P√≥s-Live:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Se a d√∫vida for muito espec√≠fica, exigir dados pessoais, ou for complexa demais para ser resolvida no chat da live, o moderador deve pedir para a pessoa chamar no direct p√≥s-live ou em outro canal de suporte:
                            <ul class="list-square list-inside ml-4">
                                <li>"Para essa d√∫vida espec√≠fica sobre seu pedido, por favor, nos chame no direct que vamos te ajudar com mais privacidade!"</li>
                                <li>"Quest√µes sobre trocas ou devolu√ß√µes podem ser resolvidas com nossa equipe de suporte ap√≥s a live. O link para contato est√° na Bio!"</li>
                            </ul>
                            </li>
                            <li>**Nunca pe√ßa ou incentive a partilha de dados pessoais no chat p√∫blico.**</li>
                            <li>Impacto: Garante que o cliente seja bem atendido, mesmo para quest√µes complexas, e protege a privacidade dos usu√°rios.</li>
                        </ul>
                        </li>
                        <li>**Manter o Foco da Live:**
                        <ul class="list-circle list-inside ml-4 mt-2">
                            <li>Ao direcionar d√∫vidas complexas para fora do chat, o moderador ajuda a manter o fluxo da live focado no conte√∫do e nas CTAs principais.</li>
                            <li>Isso evita que o chat se torne um canal de suporte individual, o que poderia distrair o Lord e o restante da audi√™ncia.</li>
                        </ul>
                        </li>
                    </ul>
                `,
                quiz: {
                    questions: [
                        {
                            question: "Um usu√°rio pergunta no chat: 'Qual o status do meu pedido XXXXX?'. Qual a melhor abordagem do moderador?",
                            options: [
                                "Pedir o CPF e o endere√ßo do usu√°rio no chat para verificar.",
                                "Informar que n√£o √© poss√≠vel verificar status de pedidos durante a live e pedir para chamar no direct ap√≥s a live.",
                                "Ignorar a pergunta.",
                                "Tentar adivinhar o status do pedido."
                            ],
                            correctAnswer: 1,
                        },
                        {
                            question: "Por que √© importante dar orienta√ß√µes claras e passo a passo sobre como comprar ou entrar no grupo do WhatsApp?",
                            options: [
                                "Para preencher o chat com informa√ß√µes.",
                                "Para demonstrar que o moderador est√° ativo.",
                                "Para remover barreiras de compra e melhorar a experi√™ncia do usu√°rio.",
                                "N√£o h√° necessidade, o usu√°rio deve descobrir sozinho."
                            ],
                            correctAnswer: 2,
                        },
                    ],
                },
            },
            {
                id: 'simulador-chat',
                title: 'Simulador de Chat: Hora de Praticar!',
                content: `
                    <p>Agora que voc√™ aprendeu as fun√ß√µes essenciais, √© hora de colocar em pr√°tica! Abaixo, voc√™ ver√° coment√°rios de usu√°rios e dever√° digitar sua resposta como moderador. Tente aplicar tudo o que aprendeu!</p>
                    <p class="font-semibold mt-4">Sua meta √© responder da forma mais eficaz poss√≠vel, seguindo as diretrizes aprendidas.</p>
                `, // Removed the 'chat-simulator-container' div from here
            },
            {
                id: 'recursos-adicionais',
                title: 'Recursos Adicionais: Manual do Moderador',
                content: `
                    <p>Para te ajudar ainda mais, aqui est√° um mini-manual de respostas r√°pidas e dicas extras:</p>
                    <h3 class="text-2xl font-semibold text-gray-900 mt-6 mb-3">Manual de Respostas R√°pidas</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li>**Link da Bio:** "O link para comprar/entrar (decants/grupo VIP) est√° no perfil do Lord Aroma, pessoal! Clica l√°!"</li>
                        <li>**Originalidade:** "Sim, todos os perfumes do Lord Aroma s√£o 100% originais e com curadoria de especialista!"</li>
                        <li>**Entrega/Frete:** "Entregamos para todo o Brasil! Verifique o frete no site/link da Bio."</li>
                        <li>**Formas de Pagamento:** "Aceitamos cart√£o, pix, boleto! Todas as op√ß√µes no link da Bio."</li>
                        <li>**D√∫vidas espec√≠ficas (p√≥s-live):** "Para essa d√∫vida espec√≠fica, por favor, nos chame no direct que vamos te ajudar!"</li>
                        <li>**Pre√ßo (para lacrados):** "Entendo! No nosso Grupo VIP do WhatsApp, conseguimos pre√ßos exclusivos para lacrados! O link pra entrar est√° na Bio, n√£o perca!"</li>
                    </ul>
                    <h3 class="text-2xl font-semibold text-gray-900 mt-6 mb-3">Dicas Essenciais:</h3>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li>**Seja R√°pido:** O chat da live √© din√¢mico. Responda e interaja o mais r√°pido poss√≠vel.</li>
                        <li>**Mantenha a Calma:** Em caso de coment√°rios negativos, responda profissionalmente ou remova/bloqueie.</li>
                        <li>**Esteja Atento:** Observe o que o Lord est√° falando para alinhar suas CTAs e respostas.</li>
                        <li>**Seja Positivo e Engajador:** Seu tom influencia a energia do chat!</li>
                        <li>**Use Emojis:** Eles ajudam a transmitir emo√ß√£o e captar aten√ß√£o.</li>
                    </ul>
                    <p class="mt-6 font-semibold">Este manual √© seu melhor amigo durante as lives. Consulte-o sempre que precisar!</p>
                `,
            },
            {
                id: 'conclusao',
                title: 'Parab√©ns, Futuro Moderador!',
                content: `
                    <p class="text-xl mb-4">Voc√™ concluiu o treinamento interativo para moderadores do Lord Aroma!</p>
                    <p class="text-lg mb-4">Agora voc√™ tem o conhecimento e as ferramentas necess√°rias para:</p>
                    <ul class="list-disc list-inside mx-auto max-w-md space-y-2 text-left">
                        <li>Compreender a estrutura das lives e o funil de vendas.</li>
                        <li>Gerenciar coment√°rios e perguntas de forma eficaz.</li>
                        <li>Refor√ßar as Chamadas para A√ß√£o (CTAs) de maneira persuasiva.</li>
                        <li>Utilizar gatilhos de prova social e autoridade.</li>
                        <li>Oferecer suporte ao cliente b√°sico durante a live.</li>
                    </ul>
                    <p class="text-xl font-bold mt-6 text-purple-700">Sua dedica√ß√£o √© fundamental para o crescimento da comunidade Lord Aroma!</p>
                    <p class="text-lg mt-4">Continue praticando e revisando os m√≥dulos. Estamos ansiosos para v√™-lo em a√ß√£o!</p>
                `,
            },
        ];

        // --- Component Functions (Replicating React with DOM) ---

        function createElement(tag, classes, content = '') {
            const el = document.createElement(tag);
            if (classes) {
                el.className = classes;
            }
            if (content) {
                el.innerHTML = content;
            }
            return el;
        }

        function renderStyledButton(text, onClick, className = '', disabled = false) {
            const button = createElement('button', `bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 ease-in-out focus:outline-none focus:ring-4 focus:ring-purple-300 active:scale-95 ${className}`, text);
            button.onclick = onClick;
            button.disabled = disabled;
            return button;
        }

        // Modified to return the card element and the inner content element
        function renderCard(title, contentHtml) {
            const card = createElement('div', 'bg-white p-6 rounded-xl shadow-lg mb-8 border border-gray-200');
            if (title) {
                card.appendChild(createElement('h2', 'text-3xl font-extrabold text-gray-900 mb-6 text-center', title));
            }
            const contentDiv = createElement('div', 'prose max-w-none text-gray-700');
            contentDiv.innerHTML = contentHtml; // Sets the initial module content
            card.appendChild(contentDiv);
            return { cardElement: card, contentElement: contentDiv }; // Returns an object with both elements
        }

        function renderModal(childrenHtml, onClose) {
            const modalOverlay = createElement('div', 'fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center p-4 z-50');
            const modalContentWrapper = createElement('div', 'bg-white rounded-xl shadow-2xl p-8 w-full max-w-lg max-h-[90vh] overflow-y-auto transform scale-95 animate-scale-in');

            const closeButtonWrapper = createElement('div', 'flex justify-end');
            const closeButton = createElement('button', 'text-gray-500 hover:text-gray-800 text-2xl font-bold', '&times;');
            closeButton.onclick = onClose;
            closeButtonWrapper.appendChild(closeButton);
            modalContentWrapper.appendChild(closeButtonWrapper);

            // Adds the modal content (usually the quiz)
            modalContentWrapper.appendChild(childrenHtml); // childrenHtml is already a DOM element
            modalOverlay.appendChild(modalContentWrapper);

            return modalOverlay;
        }

        function renderProgressBar() {
            const progress = ((currentStep + 1) / steps.length) * 100;
            const progressBarContainer = createElement('div', 'w-full bg-gray-200 rounded-full h-4 mb-6 relative overflow-hidden');
            const progressBarFill = createElement('div', 'bg-purple-500 h-full rounded-full transition-all duration-500 ease-out');
            progressBarFill.style.width = `${progress}%`;
            const progressText = createElement('div', 'absolute inset-0 flex items-center justify-center text-xs font-semibold text-gray-800', `${Math.round(progress)}% Conclu√≠do`);

            progressBarContainer.appendChild(progressBarFill);
            progressBarContainer.appendChild(progressText);
            return progressBarContainer;
        }

        function renderQuiz(questions, onSubmit) {
            const quizContainer = createElement('div', 'p-4');
            quizContainer.appendChild(createElement('h3', 'text-2xl font-bold text-gray-800 mb-6 text-center', 'Quiz de Conhecimento'));

            let selectedAnswers = {};
            // 'submitted' state is now managed within the function scope for each quiz instance
            let submitted = false;

            questions.forEach((q, qIndex) => {
                const questionDiv = createElement('div', 'mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50');
                questionDiv.appendChild(createElement('p', 'font-semibold text-lg mb-3 text-gray-800', `${qIndex + 1}. ${q.question}`));

                q.options.forEach((option, oIndex) => {
                    const label = createElement('label', 'block mb-2 text-gray-700');
                    const input = createElement('input', 'mr-2 accent-purple-600');
                    input.type = 'radio';
                    input.name = `question-${qIndex}`;
                    input.value = oIndex;
                    input.onchange = () => {
                        selectedAnswers[qIndex] = oIndex;
                        // Re-render the quiz to update button disabled state
                        updateQuizDisplay();
                    };
                    label.appendChild(input);
                    label.appendChild(document.createTextNode(option));

                    questionDiv.appendChild(label);
                });
                quizContainer.appendChild(questionDiv);
            });

            const submitButton = renderStyledButton(
                'Enviar Respostas', // Text will be updated by updateQuizDisplay
                () => {
                    let score = 0;
                    questions.forEach((q, index) => {
                        if (selectedAnswers[index] === q.correctAnswer) {
                            score++;
                        }
                    });
                    currentQuizScore = score; // Update global score
                    submitted = true;
                    onSubmit(score); // Call the callback for the parent module

                    // Update quiz display after submission
                    updateQuizDisplay();
                },
                'w-full mt-4'
            );
            quizContainer.appendChild(submitButton);

            // Function to update the quiz display (e.g., disable inputs, show feedback)
            function updateQuizDisplay() {
                // Update button text and disabled state
                submitButton.textContent = submitted ? 'Quiz Enviado' : 'Enviar Respostas';
                submitButton.disabled = submitted || Object.keys(selectedAnswers).length < questions.length;

                // Disable radio buttons after submission
                quizContainer.querySelectorAll('input[type="radio"]').forEach(radio => radio.disabled = submitted);

                // Remove any existing feedback before adding the new one
                const existingFeedback = quizContainer.querySelector('.feedback-message');
                if (existingFeedback) {
                    quizContainer.removeChild(existingFeedback);
                }

                // Add feedback message if submitted
                if (submitted) {
                    const feedbackHtml = `
                        <p class="text-center mt-4 text-xl feedback-message">
                            Voc√™ acertou ${currentQuizScore} de ${questions.length} perguntas.
                            ${currentQuizScore === questions.length ?
                                '<span class="text-green-600 font-bold block mt-2"> Parab√©ns, voc√™ domina este m√≥dulo!</span><span class="text-gray-600 block mt-2">Clique no "X" para fechar e prosseguir.</span>' :
                                '<span class="text-red-600 font-bold block mt-2"> Revise o conte√∫do e tente novamente. Voc√™ precisa acertar todas as perguntas para avan√ßar!</span>'
                            }
                        </p>
                    `;
                    quizContainer.appendChild(createElement('div', '', feedbackHtml));
                }
            }

            // Initial display update
            updateQuizDisplay();

            return quizContainer;
        }

        // State variables for the Chat Simulator
        let chatMessages = [
            { sender: 'Usu√°rio', text: 'Que perfume maravilhoso esse!' },
            { sender: 'Usu√°rio', text: 'Onde consigo o link para comprar os decants?' },
            { sender: 'Usu√°rio', text: 'Quero comprar esse perfume, mas est√° caro!' },
            { sender: 'Usu√°rio', text: 'O Lord Aroma √© confi√°vel? Os perfumes s√£o originais?' },
            { sender: 'Usu√°rio', text: 'Qual o melhor perfume para usar no trabalho?' },
        ];
        let chatCurrentIndex = 0;
        let moderatorResponse = '';
        let chatFeedback = '';
        let chatScore = 0;
        let showChatCompletion = false;

        // Function to render ONLY the inner content of the simulator, not the card itself
        function renderChatSimulatorContent() {
            const container = createElement('div');

            if (showChatCompletion) {
                container.appendChild(createElement('div', 'text-center', `
                    <h3 class="text-3xl font-bold text-gray-800 mb-4">Simula√ß√£o Conclu√≠da!</h3>
                    <p class="text-xl text-gray-700">Voc√™ acertou ${chatScore} de ${chatMessages.length} cen√°rios.</p>
                    <p class="mt-4 text-lg text-gray-600">Continue praticando para aprimorar suas habilidades!</p>
                `));
                return container;
            }

            const currentMessage = chatMessages[chatCurrentIndex];

            container.appendChild(createElement('p', 'text-lg font-semibold text-gray-800 mb-4', 'Coment√°rio do Usu√°rio:'));
            container.appendChild(createElement('div', 'bg-gray-100 p-4 rounded-lg border border-gray-200 mb-6', `<p class="text-gray-700 italic">"${currentMessage.text}"</p>`));

            container.appendChild(createElement('p', 'text-lg font-semibold text-gray-800 mb-3', 'Sua Resposta como Moderador:'));
            const textarea = createElement('textarea', 'w-full p-3 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-purple-500 resize-y min-h-[80px]');
            textarea.value = moderatorResponse;
            textarea.placeholder = 'Digite sua resposta aqui...';
            textarea.oninput = (e) => {
                moderatorResponse = e.target.value;
            };
            container.appendChild(textarea);

            const buttonsDiv = createElement('div', 'flex justify-between items-center mt-4');

            const handleSubmitResponse = () => {
                let newFeedback = '';
                let correct = false;

                // Simplified evaluation logic
                if (chatCurrentIndex === 0) { // Que perfume maravilhoso esse!
                    if (moderatorResponse.toLowerCase().includes('decant') && moderatorResponse.toLowerCase().includes('link na bio')) {
                        newFeedback = 'Excelente! Voc√™ transformou um elogio em uma oportunidade de venda de decants.';
                        correct = true;
                    } else {
                        newFeedback = 'Boa tentativa, mas voc√™ poderia ter aproveitado para direcionar para o link dos decants na Bio.';
                    }
                } else if (chatCurrentIndex === 1) { // Onde consigo o link para comprar os decants?
                    if (moderatorResponse.toLowerCase().includes('link na bio') && moderatorResponse.toLowerCase().includes('perfil')) {
                        newFeedback = 'Perfeito! Resposta direta e clara, ajudando o usu√°rio a encontrar o link rapidamente.';
                        correct = true;
                    } else {
                        newFeedback = 'Voc√™ poderia ter sido mais espec√≠fico sobre onde encontrar o link na Bio.';
                    }
                } else if (chatCurrentIndex === 2) { // Quero comprar esse perfume, mas est√° caro!
                    if (moderatorResponse.toLowerCase().includes('grupo vip') && moderatorResponse.toLowerCase().includes('lacrados') && moderatorResponse.toLowerCase().includes('link na bio')) {
                        newFeedback = '√ìtimo! Voc√™ abordou a obje√ß√£o de pre√ßo e direcionou para a solu√ß√£o do Grupo VIP para lacrados.';
                        correct = true;
                    } else {
                        newFeedback = 'Pense em como direcionar para as ofertas do Grupo VIP para lacrados quando o pre√ßo √© uma obje√ß√£o.';
                    }
                } else if (chatCurrentIndex === 3) { // O Lord Aroma √© confi√°vel? Os perfumes s√£o originais?
                    if (moderatorResponse.toLowerCase().includes('100% originais') && moderatorResponse.toLowerCase().includes('curadoria') && moderatorResponse.toLowerCase().includes('especialista')) {
                        newFeedback = 'Muito bom! Voc√™ refor√ßou a autoridade e a confiabilidade do Lord Aroma.';
                        correct = true;
                    } else {
                        newFeedback = 'Lembre-se de refor√ßar a originalidade e a curadoria do Lord Aroma para construir confian√ßa.';
                    }
                } else if (chatCurrentIndex === 4) { // Qual o melhor perfume para usar no trabalho?
                    if (moderatorResponse.toLowerCase().includes('lord') && moderatorResponse.toLowerCase().includes('perguntar') && moderatorResponse.toLowerCase().includes('diretamente')) {
                        newFeedback = 'Certo! Voc√™ direcionou a pergunta para o Lord, que √© o especialista em conte√∫do, mantendo o fluxo da live.';
                        correct = true;
                    } else {
                        newFeedback = 'Essa √© uma pergunta para o Lord. O moderador deve filtrar e repassar as perguntas de conte√∫do para ele.';
                    }
                }

                chatFeedback = newFeedback;
                if (correct) {
                    chatScore++;
                }
                moderatorResponse = ''; // Clear response for the next message
                renderApp(); // Re-render to show feedback
            };

            const handleNextMessage = () => {
                chatFeedback = '';
                if (chatCurrentIndex < chatMessages.length - 1) {
                    chatCurrentIndex++;
                } else {
                    showChatCompletion = true;
                }
                renderApp(); // Re-render for the next message or completion
            };

            buttonsDiv.appendChild(renderStyledButton('Enviar Resposta', handleSubmitResponse, 'bg-green-600 hover:bg-green-700'));
            buttonsDiv.appendChild(renderStyledButton(`Pr√≥ximo Coment√°rio (${chatCurrentIndex + 1}/${chatMessages.length})`, handleNextMessage, 'bg-blue-600 hover:bg-blue-700'));
            container.appendChild(buttonsDiv);

            if (chatFeedback) {
                const feedbackClass = chatFeedback.includes('Excelente') || chatFeedback.includes('Perfeito') || chatFeedback.includes('Muito bom') || chatFeedback.includes('√ìtimo') || chatFeedback.includes('Certo') ? 'bg-green-100 text-green-800 border-green-300' : 'bg-red-100 text-red-800 border-red-300';
                container.appendChild(createElement('div', `mt-6 p-4 rounded-lg ${feedbackClass} border`, `<p class="font-semibold text-lg">${chatFeedback}</p>`));
            }

            return container; // Returns the DOM element with the simulator content
        }


        // --- Main Application Rendering Function ---
        function renderApp() {
            const appRoot = document.getElementById('app-root');
            appRoot.innerHTML = ''; // Clears current content

            const currentStepData = steps[currentStep];

            // Main title
            appRoot.appendChild(createElement('h1', 'text-4xl md:text-5xl font-extrabold text-center text-gray-900 mb-10 leading-tight', `Treinamento de Moderadores <span class="text-purple-700">Lord Aroma</span>`));

            // Progress bar
            appRoot.appendChild(renderProgressBar());

            // Renders the card and gets the reference to the inner content element
            const { cardElement, contentElement } = renderCard(currentStepData.title, currentStepData.content);
            appRoot.appendChild(cardElement);

            // Specific content for the chat simulator
            if (currentStepData.id === 'simulador-chat') {
                contentElement.appendChild(renderChatSimulatorContent());
            }

            // Logic for the quiz button for learning modules
            if (currentStepData.quiz) {
                if (!quizCompletedStatus[currentStepData.id]) {
                    const testKnowledgeButton = renderStyledButton(
                        'Testar Conhecimento',
                        () => {
                            const quizContentElement = renderQuiz(currentStepData.quiz.questions, (score) => {
                                if (score === currentStepData.quiz.questions.length) {
                                    quizCompletedStatus[currentStepData.id] = true;
                                }
                                // No re-render here, feedback is handled inside renderQuiz
                            });
                            const quizModal = renderModal(
                                quizContentElement, // Pass the DOM element of the quiz directly
                                () => {
                                    appRoot.removeChild(quizModal); // Close the modal
                                    currentQuizScore = null; // Reset quiz score
                                    renderApp(); // Re-render to update module state
                                }
                            );
                            appRoot.appendChild(quizModal); // Open the modal
                        },
                        'w-full mt-8'
                    );
                    // Add the "Testar Conhecimento" button to the card
                    contentElement.appendChild(testKnowledgeButton);
                } else {
                    contentElement.appendChild(createElement('div', 'mt-8 text-center text-green-600 font-bold text-lg', 'M√≥dulo Conclu√≠do! üéâ'));
                }
            }

            // Navigation buttons
            const navigationDiv = createElement('div', 'flex justify-between items-center mt-8 pt-4 border-t border-gray-200');

            const prevButton = renderStyledButton(
                'Anterior',
                () => {
                    if (currentStep > 0) {
                        currentStep--;
                        renderApp();
                    }
                },
                'bg-gray-500 hover:bg-gray-600 px-4 py-2',
                currentStep === 0
            );
            navigationDiv.appendChild(prevButton);

            navigationDiv.appendChild(createElement('span', 'text-lg font-semibold text-gray-700', `Passo ${currentStep + 1} de ${steps.length}`));

            // Determine if the "Pr√≥ximo" button should be enabled
            const canProceed = (currentStepData.quiz && quizCompletedStatus[currentStepData.id]) || !currentStepData.quiz || currentStepData.id === 'simulador-chat' || currentStepData.id === 'intro' || currentStepData.id === 'estrutura-live' || currentStepData.id === 'recursos-adicionais' || currentStepData.id === 'conclusao';

            const nextButton = renderStyledButton(
                currentStep === steps.length - 1 ? 'Concluir' : 'Pr√≥ximo',
                () => {
                    if (currentStep < steps.length - 1) {
                        currentStep++;
                        renderApp();
                    }
                },
                'px-4 py-2',
                currentStep === steps.length - 1 || !canProceed
            );
            navigationDiv.appendChild(nextButton);

            appRoot.appendChild(navigationDiv);
        }

        // Render the application when the page is loaded
        document.addEventListener('DOMContentLoaded', renderApp);

    </script>
</body>
</html>
